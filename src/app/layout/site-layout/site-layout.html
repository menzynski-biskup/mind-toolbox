<div class="layout-root">
  <a class="skip-link" href="#main-content">Skip to main content</a>
  <a class="skip-link" href="#site-navigation">Skip to navigation</a>
  <a class="skip-link" href="#site-footer">Skip to footer</a>

  <header class="layout-header">
    <div class="layout-container layout-header-bar">
      <div class="layout-brand">Mind Toolbox</div>
      <button
        type="button"
        class="menu-toggle"
        [attr.aria-expanded]="menuOpen()"
        aria-controls="site-navigation"
        (click)="toggleMenu()"
      >
        <span class="menu-icon" aria-hidden="true"></span>
        <span>Menu</span>
      </button>
      <nav aria-label="Primary" id="site-navigation">
        <ul
          class="primary-nav"
          [attr.data-open]="menuOpen()"
          (mouseleave)="handlePrimaryNavLeave($event)"
        >
          @for (group of navGroups; track group.label; let i = $index) {
            <li
              class="nav-group"
              [class.nav-group--has-children]="group.children?.length"
              [class.nav-group--open]="isGroupOpen(i)"
              (mouseenter)="handleGroupPointerEnter(i)"
            >
              <a
                class="nav-link"
                [routerLink]="group.path"
                routerLinkActive="active"
                #solo="routerLinkActive"
                [routerLinkActiveOptions]="{ exact: group.path === '/' }"
                [attr.aria-current]="solo.isActive ? 'page' : null"
                (click)="closeMenu()"
              >
                {{ group.label }}
              </a>
            </li>
          }
        </ul>
      </nav>
    </div>
  </header>
  <div
    class="nav-overlay"
    [class.nav-overlay--active]="menuOpen()"
    (click)="toggleMenu()"
    aria-hidden="true"
  ></div>

  <div class="layout-main" [class.layout-main--blurred]="menuOpen()">
    <div class="layout-container layout-main-inner">
      <main id="main-content" tabindex="-1">
        <router-outlet></router-outlet>
      </main>
    </div>
  </div>

  <footer class="layout-footer" id="site-footer">
    <div class="layout-container footer-grid">
      <section aria-labelledby="footer-brand">
        <h2 id="footer-brand">{{ footer().projectName }}</h2>
        <p>{{ footer().mission }}</p>
      </section>
      <section aria-labelledby="footer-links">
        <h2 id="footer-links">Explore</h2>
        <ul class="footer-links">
          @for (link of navGroups; track link.label) {
            <li>
              <a [routerLink]="link.path">{{ link.label }}</a>
            </li>
          }
        </ul>
      </section>
    </div>
  </footer>
</div>
